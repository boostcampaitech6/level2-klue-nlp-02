# ğŸ†**Level2 Project - RE(Relation Extraction)**


## âœï¸**ëŒ€íšŒ ì†Œê°œ**

<div align='center'>

|íŠ¹ì§•|ì„¤ëª…|
|:--:|--|
|**ëŒ€íšŒ ì£¼ì²´**|ë„¤ì´ë²„ ë¶€ìŠ¤íŠ¸ìº í”„ AI-Tech 6ê¸° NLPíŠ¸ë™ì˜ level2 ì‹¤ì „ í”„ë¡œì íŠ¸ ëŒ€íšŒì…ë‹ˆë‹¤.|
|**ëŒ€íšŒ ì„¤ëª…**|ë¬¸ì¥, ë‹¨ì–´ì— ëŒ€í•œ ì •ë³´ë¥¼ í†µí•´, ë¬¸ì¥ ì†ì—ì„œ ë‹¨ì–´ ì‚¬ì´ì˜ ê´€ê³„(Relation Extraction)ë¥¼ ì¶”ë¡ í•˜ëŠ” ëª¨ë¸ì„ í•™ìŠµí•˜ëŠ” taskì˜€ìŠµë‹ˆë‹¤.|
|**ë°ì´í„° êµ¬ì„±**|ë°ì´í„°ëŠ” wikipedia, wikitree, policy_briefingìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. Train(32470ê°œ), Test(7765ê°œ) |
|**í‰ê°€ ì§€í‘œ**|ëª¨ë¸ì˜ í‰ê°€ì§€í‘œëŠ” No_relation í´ë˜ìŠ¤ë¥¼ ì œì™¸í•œ Micro F1 Scoreì™€ ëª¨ë“  í´ë˜ìŠ¤ì— ëŒ€í•œ AUPRCë¡œ ì¸¡ì •í–ˆìŠµë‹ˆë‹¤.|
</div>


<br>

## ğŸ‘¨â€ğŸ’»Team & Members

* **Teamëª…** : **ë”ë‹í¬ë£¨ê±° [NLP 2ì¡°]**


### ğŸ§š**Members**

<div align='center'>

|êµ¬ë‹¤ì—°[<img src="img/github-mark.png" width="20" style="vertical-align:middle;">](https://github.com/9ooDa)|ê¹€ë™í˜„[<img src="img/github-mark.png" width="20" style="vertical-align:middle;">](https://github.com/valofosho)|ê¹€ìœ ë¯¼[<img src="img/github-mark.png" width="20" style="vertical-align:middle;">](https://github.com/miniminii)|ê¹€í¬ë²”[<img src="img/github-mark.png" width="20" style="vertical-align:middle;">](https://github.com/C7C4FF)|ì´ë¯¼ì•„[<img src="img/github-mark.png" width="20" style="vertical-align:middle;">](https://github.com/minari1505)|ì´ì§€ì¸[<img src="img/github-mark.png" width="20" style="vertical-align:middle;">](https://github.com/Boribori12)|
|:--:|:--:|:--:|:--:|:--:|:--:|
|![á„ƒá…¡á„‹á…§á†«](https://github.com/boostcampaitech6/level2-klue-nlp-02/assets/58420112/8e952c33-468e-46a8-979d-512057ad364e)|![á„ƒá…©á†¼á„’á…§á†«](https://github.com/boostcampaitech6/level2-klue-nlp-02/assets/58420112/51f6e386-e1d8-4ae6-ae7d-2d6480dd3b80)|![á„‹á…²á„†á…µá†«](https://github.com/boostcampaitech6/level2-klue-nlp-02/assets/58420112/5d9ff58b-f0a7-4945-9984-5ab311795395)|![á„’á…´á„‡á…¥á†·](https://github.com/boostcampaitech6/level2-klue-nlp-02/assets/58420112/75d58975-28a6-4d2d-8c53-f9222d98fa87)|![á„†á…µá†«á„‹á…¡](https://github.com/boostcampaitech6/level2-klue-nlp-02/assets/58420112/0d83ae8a-218b-466c-b957-7ac93c32e3b0)|![á„Œá…µá„‹á…µá†«](https://github.com/boostcampaitech6/level2-klue-nlp-02/assets/58420112/e24d1293-bd19-4d89-ace3-ce706734f10a)|
|[Mail](dayeonkuhk@gmail.com)|[Mail](whgdk1880@gmail.com)|[Mail](sksdjssl3148@gmail.com)|[Mail](c7c4ff.beom@gmail.com)|[Mail](minari1505@naver.com)|[Mail](sos000523@naver.com)|
</div>

<br>

### ğŸ’¯**Our Team's Goal**
> íŒ€ ë‹¨ìœ„ í”„ë¡œì íŠ¸ì¸ë§Œí¼ ìµœëŒ€í•œ ë‹¤ì–‘í•œ ì‹œë„ë¥¼ ë¶„ì—…í•˜ì—¬ ì„œë¡œì˜ ì‘ì—…ì´ ê²¹ì¹˜ì§€ ì•Šë„ë¡ ì£¼ì˜í•˜ë©° ì§„í–‰í–ˆìŠµë‹ˆë‹¤. ì§„í–‰í–ˆë˜ ì „ì²˜ë¦¬ ë°©ë²•ë¡ ê³¼ ëª¨ë¸ë§ì˜ ì„±ëŠ¥ ë³€í™” ì¶”ì„¸ì™€ ê·¸ ì´ìœ ë¥¼ ë¶„ì„í•˜ê³ , í˜‘ì—…íˆ´ë¡œ ê³µìœ í•˜ì—¬ íŒ€ì› ëª¨ë‘ì˜ ê³µë¶€ë¥¼ ëª©í‘œë¡œ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í–ˆìŠµë‹ˆë‹¤.

<br>

### ğŸ‘¼**Member's role**
|**Member**|**Role**|
|--|--|
|**êµ¬ë‹¤ì—°**|**ì „ì²˜ë¦¬**, **ëª¨ë¸ë§ ë° íŠœë‹**, **ì•™ìƒë¸”**|
|**ê¹€ë™í˜„**|**EDA**, **ì „ì²˜ë¦¬**, **ëª¨ë¸ë§ ë° íŠœë‹**, **ì•™ìƒë¸”**, **WandB ì—°ë™ ë° ì‹œê°í™”**, **ì½”ë“œ ë¦¬íŒ©í† ë§**|
|**ê¹€ìœ ë¯¼**|**ì „ì²˜ë¦¬**, **ëª¨ë¸ë§ ë° íŠœë‹**, **WandB**|
|**ê¹€í¬ë²”**|**ë² ì´ìŠ¤ë¼ì¸ ë¦¬íŒ©í† ë§ ë° êµ¬ì¡° ì‘ì„±**, **ì „ì²˜ë¦¬**, **ëª¨ë¸ë§ ë° íŠœë‹**, **ì•™ìƒë¸”**|
|**ì´ë¯¼ì•„**|**ì „ì²˜ë¦¬**, **ëª¨ë¸ë§ ë° íŠœë‹**, **loss ìƒì„± ë° íŠœë‹**|
|**ì´ì§€ì¸**|**ë°ì´í„° ì¦ê°•**, **íšŒì˜ ì§„í–‰ ë° íšŒì˜ë¡ ì‘ì„±**|


<br>

## ğŸƒ**Project process**

### ğŸ–¥ï¸ Project Introduction
|**ê°œìš”**|**Description**|
|:--:|--|
|**í”„ë¡œì íŠ¸ ì£¼ì œ** | **`RE(Relation Extraction)`** : ë¬¸ì¥ ë‚´ ê°œì²´ ê°„ ê´€ê³„ë¥¼ ì˜ˆì¸¡í•˜ëŠ” 30ê°œì˜ ë¼ë²¨ë¡œ ì¤‘ í•˜ë‚˜ë¡œ ë¶„ë¥˜í•˜ëŠ” ë¬¸ì œ|
|**í”„ë¡œì íŠ¸ ëª©í‘œ**| ë‹¤ì–‘í•œ ì „ì²˜ë¦¬ ê¸°ë²•ê³¼ ëª¨ë¸ë§ì„ í™œìš©í•˜ì—¬ ë¬¸ì¥, ë‹¨ì–´ì— ëŒ€í•œ ì •ë³´ë¥¼ í†µí•´ ,ë¬¸ì¥ ì†ì—ì„œ ë‹¨ì–´ ì‚¬ì´ì˜ ê´€ê³„ë¥¼ ì¶”ë¡ í•˜ëŠ” ëª¨ë¸ì„ ìƒì„±
|**í”„ë¡œì íŠ¸ í‰ê°€ì§€í‘œ**|No_relation í´ë˜ìŠ¤ë¥¼ ì œì™¸í•œ **Micro F1 Score**, ëª¨ë“  í´ë˜ìŠ¤ì— ëŒ€í•œ **AUPRC**(Area Under the Precision-Recall Curve)|
|**ê°œë°œ í™˜ê²½**|**`GPU` : Tesla V100 Server 6ëŒ€**, **`IDE` : Vscode, Jupyter Notebook**|
|**í˜‘ì—… í™˜ê²½**|**`Notion`**(ì§„í–‰ ìƒí™© ê³µìœ ), **`Github`**(ì½”ë“œ ë° ë°ì´í„° ê³µìœ ), **`Slack`**(ì‹¤ì‹œê°„ ì†Œí†µ) |

<br>

### ğŸ“…**Project TimeLine**

* í”„ë¡œì íŠ¸ëŠ” 2024-01-03 ~ 2024-01-18 ì•½ 15ì¼ê°„ ì§„í–‰ë˜ì—ˆìŠµë‹ˆë‹¤.

![Alt text](./img/milestone.png)

<br>

### ğŸ•µï¸**What we did**

* í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©° ë‹¨ê³„ë³„ë¡œ ì‹¤í—˜í•´ ë³´ê³  ì ìš©í•´ ë³¸ ë‚´ìš©ë“¤ì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.
* ë³´ë‹¤ ìì„¸í•œ ì‚¬í•­ì€ [ğŸ“‹Wrap-up Report](https://supreme-kilogram-785.notion.site/Wrap-up-Report-0b47d31a89474f25b8ca6a749022c2e2?pvs=4)ë¥¼ ì°¸ê³ í•´ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.

|**Process**|**What we did**|
|:--:|--|
|**EDA**|`ë°ì´í„° ë¶„í¬ ë¶„ì„`, `ë°ì´í„° ê¸¸ì´ ë¶„ì„`, `Baseline ëª¨ë¸ ì˜ˆì¸¡ë¼ë²¨ê³¼ ì‹¤ì œ ë¼ë²¨ ì°¨ì´ ë¶„ì„`|
|**Preprocessing**|`ì¤‘ë³µ í–‰ ì œê±°`, `íŠ¹ìˆ˜ë¬¸ì ì œê±°`, `hanja(í•œì-í•œê¸€ ë³€í™˜)`, `hanspell(ë§ì¶¤ë²•ê²€ì‚¬)`,`pykospacing(ë„ì–´ì“°ê¸° ì¬ì •ë ¬)`|
|**Augmentation**|`EDA(Easy-Data-Augmentation)`, `entity swap`|
|**Experiment Model**|`klue/bert-base`, `ainize/klue-bert-base-re`,`kakaobank/kf-deberta-base`,`bespin-global/klue-sentence-roberta-base-kornlu`,`klue/roberta-large`, `monologg/koelectra-base-v3-discriminator`,`xlm-roberta-large`,`team-lucid/deberta-v3-xlarge-korean`|
|**Hyper-parameter tuning & Mornitoring**| `Wandb Sweep`|
|**Visualization**| `Plotly`|
|**Ensemble**|`weighted voting`, `soft voting`, `hard voting`|




### ğŸ¤–**Ensemble Model**

* ìµœì¢…ì ìœ¼ë¡œ 4ê°œì˜ ëª¨ë¸ì„ ì•™ìƒë¸”ì— ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.

|**Model**|**Learing Rate**|**Batch Size**|**loss**|**epoch**|**Dataset**|**Entity Marker**|**Public Micro F1 Score**|**Public AUPRC**|
|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|
|**klue/RoBERTa-large**|3e-5|32|FocalLoss|3|dist_1|tem_punt_question|73.8103|78.0330|
|**klue/RoBERTa-large**|3e-5|32|FocalLoss|3|Filter_duplicates_1|tem_punt_question|72.8334|78.5174|
|**xlm-roberta-large**|5e-5|48|FocalLosss|3|dist_1|tem_punt_question|68.4932|75.6809|
|**kakaobank/kf-deberta-base**|5e-5|32|FocalLoss|3|dist_1|tem_punt_question|72.9120|76.9670|

<br>

## **ğŸ“Project Structure**

### **ğŸ“ë””ë ‰í† ë¦¬ êµ¬ì¡° ì„¤ëª…**
* í•™ìŠµ ë°ì´í„° ê²½ë¡œ : `./data`
* ëª¨ë¸ ë° Sweep Config ê²½ë¡œ : `./config`
* í•™ìŠµëœ ëª¨ë¸ ìƒì„± ê²½ë¡œ : `./best_model`
* ì¶”ë¡  ê²°ê³¼ ìƒì„± ê²½ë¡œ : `./prediction`
* ì•™ìƒë¸” ì½”ë“œ ê²½ë¡œ: `./ensemble`


### **ğŸ“ğŸ“ì½”ë“œ êµ¬ì¡° ì„¤ëª…**
1. **Preprocessing ì„¤ì • ì½”ë“œ ê²½ë¡œ**: `./preprocessing/preprocessing.py`
2. **Config ì„¤ì • ì½”ë“œ ê²½ë¡œ** : `./config/`
3. **Model Train ì½”ë“œ ìœ„ì¹˜** : `./train.py`
    - ëª¨ë¸ .ptíŒŒì¼ ìƒì„± ê²½ë¡œ : `./best_model/`
4. **Infer ì½”ë“œ ìœ„ì¹˜** : `./inference.py`
    - ì¶”ë¡  ê²°ê³¼ .csvíŒŒì¼ ìƒì„± ê²½ë¡œ : `./prediction/`
5. **Ensemble ì½”ë“œ ìœ„ì¹˜** : `./ensemble/ensemble.py`

```
ğŸ“¦ 
â”œâ”€Â best_model
â”œâ”€Â config
â”‚Â Â â”œâ”€Â config.yaml
â”‚Â Â â””â”€Â sweep.yaml
â”œâ”€Â data
â”œâ”€Â dataset
â”‚Â Â â”œâ”€Â dict_label_to_num.pkl
â”‚Â Â â”œâ”€Â dict_num_to_label.pkl
â”‚Â Â â””â”€Â wordnet.pickle
â”œâ”€Â prediction
â”œâ”€Â preprocessing
â”‚Â Â â”œâ”€Â eda.py
â”‚Â Â â”œâ”€Â entity_swap.py
â”‚Â Â â”œâ”€Â train_dev_split.py
â”‚Â Â â”œâ”€Â spacing.py
â”‚Â Â â”œâ”€Â filter_duplicates.py
â”‚Â Â â”œâ”€Â filter_japanese.py
â”‚Â Â â”œâ”€Â translate_hanja.py
â”‚Â Â â””â”€Â clean_special_chars.py
â”œâ”€Â result
â”œâ”€Â trainer
â”‚Â Â â””â”€Â trainer.py
â”œâ”€Â utils
â”‚Â Â â”œâ”€Â compute_metrics.py
â”‚Â Â â”œâ”€Â get_model.py
â”‚Â Â â”œâ”€Â labeling.py
â”‚Â Â â””â”€Â set_seed.py
â”œâ”€Â ensemble
â”‚Â Â â”œâ”€Â utils.py
â”‚Â Â â”œâ”€Â ensemble.py
â”‚Â Â â”œâ”€Â ensemble_data
â”‚Â Â â””â”€Â ensemble_output
â”œâ”€Â inference.py
â”œâ”€Â train.py
â”œâ”€Â sweep.py
â””â”€Â run.py
```

<br>

## **ğŸ’»Getting Started**

### ğŸ› ï¸**Requirements**
```
# í•„ìš” ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜
> pip install -r requirements.txt
```

### **ğŸ“ŠMake Dataset**
```
# ë°ì´í„° ì „ì²˜ë¦¬
> python ./preprocessing/preprocessing.py
```

### **ğŸ¤–Train Model**
```
# ./config ì—ì„œ í›ˆë ¨ ëª¨ë¸ì˜ config ì„¤ì •
# config.yamlì€ ìë™ìœ¼ë¡œ ì ìš©
> python train.py
```

### **ğŸ¤–Predict Label**
```
# í•™ìŠµëœ ëª¨ë¸ë¡œ ë¼ë²¨ ì˜ˆì¸¡
> python inference.py
```

### **ğŸ¤–Ensemble Outputs**
```
# Ensemble
> python ./ensemble/ensemble.py
```